# èµ„è®¯åˆ†ç±»æ˜ å°„å…³ç³»è¯´æ˜

æœ¬æ–‡æ¡£æ¸…æ™°è¯´æ˜äº†UIæ¨¡å—ã€APIç«¯ç‚¹ã€Categoryå€¼å’ŒJSONæ–‡ä»¶ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚

## ğŸ“‹ æ˜ å°„å…³ç³»æ€»è§ˆ

| UIæ¨¡å—åç§° | è·¯ç”±è·¯å¾„ | APIç«¯ç‚¹ | Categoryå€¼ | JSONæ–‡ä»¶å | æ–‡ä»¶è·¯å¾„ |
|----------|---------|---------|-----------|-----------|---------|
| **ç¼–ç¨‹èµ„è®¯** | `/news` | `/api/news?category=programming` | `programming` | `programming.json` | `data/articles/programming.json` |
| **AIèµ„è®¯** | `/ai-news` | `/api/ai-news` (å†…éƒ¨è°ƒç”¨ `/api/news?category=ai_news`) | `ai_news` | `ai_news.json` | `data/articles/ai_news.json` |

## ğŸ” è¯¦ç»†è¯´æ˜

### 1. ç¼–ç¨‹èµ„è®¯æ¨¡å—

- **UIæ˜¾ç¤ºåç§°**: "ç¼–ç¨‹èµ„è®¯"
- **å‰ç«¯è·¯ç”±**: `/news`
- **APIç«¯ç‚¹**: 
  - ç›´æ¥è°ƒç”¨: `/api/news?category=programming`
  - æˆ–è°ƒç”¨: `/api/news` (ä¸ä¼ categoryæ—¶è·å–æ‰€æœ‰æ–‡ç« ï¼Œå‰ç«¯å¯ç­›é€‰)
- **Categoryå€¼**: `programming`
- **JSONæ–‡ä»¶**: `programming.json`
- **æ–‡ä»¶è·¯å¾„**: `data/articles/programming.json`
- **ç”¨é€”**: å­˜å‚¨ç¼–ç¨‹ç›¸å…³çš„æŠ€æœ¯æ–‡ç« å’Œèµ„è®¯

### 2. AIèµ„è®¯æ¨¡å—

- **UIæ˜¾ç¤ºåç§°**: "AIèµ„è®¯"
- **å‰ç«¯è·¯ç”±**: `/ai-news`
- **APIç«¯ç‚¹**: 
  - ä¸“ç”¨ç«¯ç‚¹: `/api/ai-news` (å†…éƒ¨é‡å®šå‘åˆ° `/api/news?category=ai_news`)
  - æˆ–ç›´æ¥è°ƒç”¨: `/api/news?category=ai_news`
- **Categoryå€¼**: `ai_news`
- **JSONæ–‡ä»¶**: `ai_news.json`
- **æ–‡ä»¶è·¯å¾„**: `data/articles/ai_news.json`
- **ç”¨é€”**: å­˜å‚¨AIç›¸å…³çš„æ–‡ç« å’Œèµ„è®¯

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### Categoryå€¼ä¸æ–‡ä»¶åçš„æ˜ å°„è§„åˆ™

åœ¨ `app/services/data_loader.py` ä¸­ï¼ŒCategoryå€¼ä¸æ–‡ä»¶åç›´æ¥å¯¹åº”ï¼š

```python
# categoryå€¼ç›´æ¥å¯¹åº”æ–‡ä»¶å
category_file_name = f"{category}.json"
```

**è§„åˆ™è¯´æ˜**:
- `category == "programming"` â†’ æ–‡ä»¶å: `programming.json`
- `category == "ai_news"` â†’ æ–‡ä»¶å: `ai_news.json`
- å…¶ä»–category â†’ æ–‡ä»¶å: `{category}.json`

### å·¥å…·å…³é”®å­—çˆ¬å–çš„èµ„è®¯

- **æ¥æºæ ‡è¯†**: `crawled_from` å­—æ®µä»¥ `"tool_keyword:"` å¼€å¤´
- **é‡‡çº³åçš„åˆ†ç±»**: `programming` (ç¼–ç¨‹èµ„è®¯)
- **ä¿å­˜ä½ç½®**: `data/articles/programming.json`
- **UIæ˜¾ç¤º**: æ˜¾ç¤ºåœ¨"ç¼–ç¨‹èµ„è®¯"æ¨¡å—ä¸‹
- **æ¥æº**: ç»Ÿä¸€ä½¿ç”¨"100kwhy"ä½œä¸ºæ¥æº

## ğŸ“ ä»£ç ä¸­çš„ä½¿ç”¨ç¤ºä¾‹

### å‰ç«¯è°ƒç”¨ç¤ºä¾‹

```javascript
// åŠ è½½ç¼–ç¨‹èµ„è®¯
loadArticles('programming', 1);

// åŠ è½½AIèµ„è®¯
loadArticles('ai_news', 1);
// æˆ–ç›´æ¥è°ƒç”¨ä¸“ç”¨API
fetch('/api/ai-news?page=1');
```

### åç«¯å½’æ¡£ç¤ºä¾‹

```python
# å½’æ¡£åˆ°ç¼–ç¨‹èµ„è®¯
DataLoader.archive_article_to_category(
    article, 
    category="programming",  # Categoryå€¼
    tool_tags=tool_tags
)
# å®é™…ä¿å­˜åˆ°: data/articles/programming.json

# å½’æ¡£åˆ°AIèµ„è®¯
DataLoader.archive_article_to_category(
    article, 
    category="ai_news",  # Categoryå€¼
    tool_tags=tool_tags
)
# å®é™…ä¿å­˜åˆ°: data/articles/ai_news.json
```

## ğŸ”„ æ•°æ®æµè½¬

1. **å·¥å…·å…³é”®å­—çˆ¬å–** â†’ å€™é€‰æ±  (`ai_candidates.json`)
2. **ç®¡ç†å‘˜é‡‡çº³** â†’ æ ¹æ®æ¥æºåˆ¤æ–­:
   - `crawled_from.startswith("tool_keyword:")` â†’ å½’æ¡£åˆ° `programming.json` (ç¼–ç¨‹èµ„è®¯)
   - å…¶ä»–æ¥æº â†’ æ·»åŠ åˆ°æ¨é€åˆ—è¡¨ (`ai_articles.json`)
3. **ç”¨æˆ·æäº¤** â†’ å€™é€‰æ±  â†’ ç®¡ç†å‘˜å®¡æ ¸ â†’ å½’æ¡£åˆ°å¯¹åº”åˆ†ç±»

## ğŸ“Œ ç›¸å…³æ–‡ä»¶ä½ç½®

- **æ•°æ®åŠ è½½æœåŠ¡**: `app/services/data_loader.py`
- **APIè·¯ç”±**: `app/routes/api.py`
- **ç®¡ç†è·¯ç”±**: `app/routes/digest.py`
- **å‰ç«¯HTML**: `app/main.py` (å†…åµŒJavaScript)


